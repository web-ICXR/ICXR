!function(e,t,n){var s=!1,o=/^1[0-9]{10}$/,i=config.getWebPath(),a="countdown",c=59,r=!1,m={setItem:function(e,t){var n=new Date;n.setTime(n.getTime()+60*1e3);var s=e+"="+encodeURIComponent(t)+"; path=/;expires="+n.toGMTString();document.cookie=s},getItem:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var s=t[n].split("=");if(s[0]==e)return decodeURIComponent(s[1])}return""}};function l(){}function u(){e(".l_empty").removeClass("l_price_submit2")}function f(){changeImgCode("verify-l-phone")}l.init=function(e){e},l.hasSeed=function(){return s},l.checkPhone=function(e,t){return wzUtils.isNotEmpty(e)?!!o.test(e)||(t.message="手机号码格式有误！",u(),!1):(t.message="手机号码不能为空！",u(),!1)},l.setCanSend=function(e){r=e},e("#send_sms").click(function(){g(e(this))});var d=m.getItem(a);function g(t){var n=e.trim(e(".w-mobile").val()),o={};if(l.checkPhone(n,o))if(e(".l_input1").val(n),r){var a=e.trim(e("#auth-code-p").val()),c=i+"/api/sms/login_auth",m=p(t);e.post(c,{phone:n,imgCode:a}).done(function(n){"1"==n.code?n.data?(s=!0,message.alert("短信已发送！"),e(".l_empty").addClass("l_price_submit2")):(message.alert("短信发送失败！"),h(t,m)):("603"==n.code?(message.warn("图形验证码错误，请重新输入！"),f()):"AC404"==n.code?(message.warn("您好，该手机号码尚未注册，请先注册再登录。加入CCF，可享受更多会员权益！"),f()):(n.msg?message.warn(n.msg):message.warn("短信发送失败！"),f()),h(t,m))}).fail(function(e,t,n){u(),message.warn("系统异常，请联系系统技术支持人员（conf_support@ccf.org.cn）")})}else e("#error-phone").text("滑动验证失败");else e("#error-phone").text(o.message)}function p(e,t){t=t||c,m.setItem(a,t),e.html("重新发送("+t+")"),e.addClass("l_second"),e.unbind();var n=setInterval(function(){t>=1?(t--,e.html("重新发送("+t+")"),t%10==0&&m.setItem(a,t)):h(e,n)},1e3);return n}function h(e,t){u(),m.setItem(a,""),e.removeClass("l_second"),e.html("获取验证码"),clearInterval(t),f(),e.click(function(){g(e)})}d&&d>0&&p(e("#send_sms"),d),t["smsUtils"]=l}(jQuery,window);